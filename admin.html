<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>모두의 테스트 관리자</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="top-bar">
        <div class="top-bar-left">
            <a class="top-bar-logo" href="index.html">모두의 테스트</a>
        </div>
        <div class="top-bar-right">
            <a class="primary-link" href="index.html">메인으로</a>
        </div>
    </header>

    <main class="page-main">
        <div class="container wide-container admin-container">
            <section id="admin-login-panel">
                <h1>관리자 로그인</h1>
                <div class="admin-grid two-col">
                    <label>
                        ID
                        <input id="admin-id" type="text" autocomplete="username">
                    </label>
                    <label>
                        Password
                        <input id="admin-password" type="password" autocomplete="current-password">
                    </label>
                </div>
                <button id="admin-login-btn" type="button">로그인</button>
                <p id="admin-login-error" class="admin-error" hidden>로그인 정보가 올바르지 않습니다.</p>
            </section>

            <section id="admin-app" hidden>
                <section id="admin-list-view">
                    <div class="admin-top-row">
                        <div class="admin-left-actions">
                            <h1>테스트 목록</h1>
                            <button id="go-create-btn" type="button">등록</button>
                            <button id="excel-upload-btn" type="button">엑셀 등록</button>
                            <a id="excel-template-download" class="admin-inline-link" href="#">엑셀 템플릿 다운로드</a>
                            <input id="excel-upload-input" type="file" accept=".xlsx,.xls,.csv" hidden>
                        </div>
                        <button id="admin-logout-btn" type="button">로그아웃</button>
                    </div>

                    <p id="admin-list-status" class="admin-list-status"></p>

                    <div class="admin-table-wrap">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>번호</th>
                                    <th>테스트 제목</th>
                                    <th>등록자</th>
                                    <th>등록 일시</th>
                                    <th>관리</th>
                                </tr>
                            </thead>
                            <tbody id="admin-test-list-body"></tbody>
                        </table>
                    </div>

                    <div class="admin-pagination">
                        <button id="list-prev-page" type="button">이전</button>
                        <p id="list-page-info">1 / 1</p>
                        <button id="list-next-page" type="button">다음</button>
                    </div>
                </section>

                <section id="admin-editor-view" hidden>
                    <div class="admin-top-row">
                        <h1 id="editor-view-title">테스트 등록</h1>
                        <button id="back-to-list-btn" type="button">목록으로</button>
                    </div>

                    <section class="admin-section-block">
                        <h2>기본 설정</h2>
                        <div class="admin-grid two-col">
                            <label>
                                테스트 제목
                                <input id="test-title" type="text" placeholder="예: 직장인 공감 MBTI">
                            </label>
                            <label>
                                카드 제목
                                <input id="card-title" type="text" placeholder="메인 카드에 표시될 제목">
                            </label>
                            <label class="admin-checkbox-label">
                                <input id="is-recommended" type="checkbox">
                                홈 추천
                            </label>
                            <fieldset class="admin-radio-group">
                                <legend>노출 여부</legend>
                                <label>
                                    <input type="radio" name="publish-state" id="publish-visible" value="visible" checked>
                                    노출
                                </label>
                                <label>
                                    <input type="radio" name="publish-state" id="publish-hidden" value="hidden">
                                    숨김
                                </label>
                            </fieldset>
                        </div>

                        <div class="admin-grid two-col image-upload-block">
                            <label>
                                카드 썸네일 이미지
                                <input id="card-thumbnail-input" type="file" accept="image/*">
                                <small class="field-hint">권장 이미지 사이즈: 1200 x 630px (JPG/PNG)</small>
                            </label>
                            <div class="image-preview-wrap">
                                <p>썸네일 미리보기</p>
                                <img id="card-thumbnail-preview" alt="thumbnail preview" hidden>
                            </div>
                        </div>
                    </section>

                    <hr class="admin-section-divider">

                    <section class="admin-section-block">
                        <div class="admin-top-row">
                            <h2>문항 설정</h2>
                            <button id="add-question-btn" type="button">문항 추가</button>
                        </div>
                        <p id="question-count-label">현재 문항 수: 0</p>
                        <div id="question-list" class="question-list"></div>
                    </section>

                    <hr class="admin-section-divider">

                    <section class="admin-section-block">
                        <h2>결과 설정</h2>
                        <div class="admin-grid two-col result-config-grid">
                            <label>
                                MBTI 유형 선택
                                <select id="result-mbti-select">
                                    <option value="INTJ">INTJ</option>
                                    <option value="INTP">INTP</option>
                                    <option value="ENTJ">ENTJ</option>
                                    <option value="ENTP">ENTP</option>
                                    <option value="INFJ">INFJ</option>
                                    <option value="INFP">INFP</option>
                                    <option value="ENFJ">ENFJ</option>
                                    <option value="ENFP">ENFP</option>
                                    <option value="ISTJ">ISTJ</option>
                                    <option value="ISFJ">ISFJ</option>
                                    <option value="ESTJ">ESTJ</option>
                                    <option value="ESFJ">ESFJ</option>
                                    <option value="ISTP">ISTP</option>
                                    <option value="ISFP">ISFP</option>
                                    <option value="ESTP">ESTP</option>
                                    <option value="ESFP">ESFP</option>
                                </select>
                            </label>
                            <label>
                                결과 화면 제목
                                <input id="result-title-input" type="text" placeholder="예: 전략가형 INTJ">
                            </label>
                            <label class="full-width">
                                결과 화면 내용
                                <textarea id="result-content-input" rows="5" placeholder="해당 유형의 결과 안내 내용을 입력해 주세요."></textarea>
                            </label>
                            <label>
                                결과 화면 이미지
                                <input id="result-image-input" type="file" accept="image/*">
                                <small class="field-hint">권장 이미지 사이즈: 1200 x 630px (JPG/PNG)</small>
                            </label>
                            <div class="image-preview-wrap">
                                <p>결과 이미지 미리보기</p>
                                <img id="result-image-preview" alt="result preview" hidden>
                            </div>
                        </div>
                    </section>

                    <div class="admin-actions">
                        <button id="save-test-btn" type="button">등록</button>
                        <p id="admin-save-status"></p>
                    </div>

                    <section class="mbti-weight-guide">
                        <h2>MBTI 가중치 참고</h2>
                        <p>각 답변 선택지마다 최대 2개의 MBTI 요소와 점수 가중치를 지정할 수 있습니다.</p>
                        <table>
                            <thead>
                                <tr>
                                    <th>유형</th>
                                    <th>의미</th>
                                    <th>권장 점수 예시</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>E</td><td>외향</td><td>+1 또는 +2</td></tr>
                                <tr><td>I</td><td>내향</td><td>+1 또는 +2</td></tr>
                                <tr><td>N</td><td>직관</td><td>+1 또는 +2</td></tr>
                                <tr><td>S</td><td>감각</td><td>+1 또는 +2</td></tr>
                                <tr><td>T</td><td>사고</td><td>+1 또는 +2</td></tr>
                                <tr><td>F</td><td>감정</td><td>+1 또는 +2</td></tr>
                                <tr><td>J</td><td>판단</td><td>+1 또는 +2</td></tr>
                                <tr><td>P</td><td>인식</td><td>+1 또는 +2</td></tr>
                            </tbody>
                        </table>
                    </section>
                </section>
            </section>
        </div>
    </main>

    <script defer src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script defer src="translations.js"></script>
    <script defer src="firebase-config.js"></script>
    <script defer src="admin.js"></script>
</body>
</html>
