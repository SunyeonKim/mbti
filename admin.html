<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>모두의 테스트 관리자</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="top-bar">
        <div class="top-bar-left">
            <a class="top-bar-logo" href="index.html">모두의 테스트</a>
        </div>
        <div class="top-bar-right">
            <a class="primary-link" href="index.html">메인으로</a>
        </div>
    </header>

    <main class="page-main">
        <div class="container wide-container admin-container">
            <section id="admin-login-panel">
                <h1>관리자 로그인</h1>
                <p class="admin-security-note">초기 계정: ID `namu` / PW `namu!@#123`</p>
                <div class="admin-grid two-col">
                    <label>
                        ID
                        <input id="admin-id" type="text" autocomplete="username">
                    </label>
                    <label>
                        Password
                        <input id="admin-password" type="password" autocomplete="current-password">
                    </label>
                </div>
                <button id="admin-login-btn" type="button">로그인</button>
                <p id="admin-login-error" class="admin-error" hidden>로그인 정보가 올바르지 않습니다.</p>
            </section>

            <section id="admin-app" hidden>
                <div class="admin-top-row">
                    <h1>테스트 등록</h1>
                    <button id="admin-logout-btn" type="button">로그아웃</button>
                </div>

                <p class="admin-security-note">Firebase Auth 인증이 적용된 관리자 화면입니다. ID는 `namu`, 비밀번호는 `namu!@#123` 초기값을 사용합니다.</p>

                <div class="admin-grid two-col">
                    <label>
                        테스트 제목
                        <input id="test-title" type="text" placeholder="예: 직장인 공감 MBTI">
                    </label>
                    <label>
                        카드 제목
                        <input id="card-title" type="text" placeholder="메인 카드에 표시될 제목">
                    </label>
                    <label>
                        네비게이션 메뉴 제목
                        <input id="nav-title" type="text" placeholder="비워두면 카드 제목 사용">
                    </label>
                    <label>
                        목표 문항 수
                        <div class="inline-control">
                            <input id="question-count-target" type="number" min="1" value="1">
                            <button id="apply-question-count" type="button">문항 수 반영</button>
                        </div>
                    </label>
                </div>

                <div class="admin-grid two-col image-upload-block">
                    <label>
                        카드 썸네일 이미지
                        <input id="card-thumbnail-input" type="file" accept="image/*">
                    </label>
                    <div class="image-preview-wrap">
                        <p>썸네일 미리보기</p>
                        <img id="card-thumbnail-preview" alt="thumbnail preview" hidden>
                    </div>

                    <label>
                        결과 화면 안내 문구
                        <textarea id="result-guide-text" rows="4" placeholder="결과 화면에서 보여줄 안내 문구"></textarea>
                    </label>
                    <label>
                        결과 화면 이미지
                        <input id="result-image-input" type="file" accept="image/*">
                        <img id="result-image-preview" alt="result preview" hidden>
                    </label>
                </div>

                <section class="mbti-weight-guide">
                    <h2>MBTI 가중치 참고</h2>
                    <p>각 답변 선택지마다 최대 2개의 MBTI 요소와 점수 가중치를 지정할 수 있습니다.</p>
                    <table>
                        <thead>
                            <tr>
                                <th>유형</th>
                                <th>의미</th>
                                <th>권장 점수 예시</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>E</td><td>외향</td><td>+1 또는 +2</td></tr>
                            <tr><td>I</td><td>내향</td><td>+1 또는 +2</td></tr>
                            <tr><td>N</td><td>직관</td><td>+1 또는 +2</td></tr>
                            <tr><td>S</td><td>감각</td><td>+1 또는 +2</td></tr>
                            <tr><td>T</td><td>사고</td><td>+1 또는 +2</td></tr>
                            <tr><td>F</td><td>감정</td><td>+1 또는 +2</td></tr>
                            <tr><td>J</td><td>판단</td><td>+1 또는 +2</td></tr>
                            <tr><td>P</td><td>인식</td><td>+1 또는 +2</td></tr>
                        </tbody>
                    </table>
                </section>

                <section>
                    <div class="admin-top-row">
                        <h2>문항 설정</h2>
                        <button id="add-question-btn" type="button">문항 추가</button>
                    </div>
                    <p id="question-count-label">현재 문항 수: 0</p>
                    <div id="question-list" class="question-list"></div>
                </section>

                <div class="admin-actions">
                    <button id="save-test-btn" type="button">테스트 저장</button>
                    <p id="admin-save-status"></p>
                </div>

                <section>
                    <h2>등록된 테스트</h2>
                    <ul id="existing-tests" class="existing-tests"></ul>
                </section>
            </section>
        </div>
    </main>

    <script defer src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <script defer src="firebase-config.js"></script>
    <script defer src="admin.js"></script>
</body>
</html>
